Build bookworm-uefi sdcard image for orangepi-5-plus.

See ../uboot/README, burn RK3588_NOR_FLASH.img to orangepi5plus spi nor flash.

------------------------------------------------------
Download debian-12.11.0-arm64-netinst.iso
------------------------------------------------------

cd ~/Downloads
wget https://cdimage.debian.org/debian-cd/current/arm64/iso-cd/debian-12.11.0-arm64-netinst.iso

------------------------------------------------------
Burn iso to USB2 sata ssd
------------------------------------------------------

cd ~/build-orangepi5plus/bookworm-uefi
Plugin USB2 sata ssd to PC.
sudo ./mksdcardimg.sh
sudo mkfs.vfat /dev/sda1
sudo fdisk -l /dev/sda
sudo mount -t vfat /dev/sda1 /mnt
cd /mnt
sudo 7z x ~/Downloads/debian-12.11.0-arm64-netinst.iso
cd ~/build-orangepi5plus/bookworm-uefi
sync
sudo umount /mnt
Eject USB2 sata ssd from PC.

-----------------------------------------------------
Install debian bookworm to USB2 sata ssd.
-----------------------------------------------------

Plugin USB2 sata ssd to orangepi-5-plus USB2 port. Plugin wifi usb dongle to orangepi-5-plus. Plugin HDMI cable to hdmi0 port ( middle one ). Power on orangepi-5-plus.
Select install
loading missing firmware? No
Select debian desktop and gnome in addition to ssh and standard system utilities.
User name: linaro

Disable power saving, turn off auto suspend and screen saver.
su -
usermod -aG adm,sudo,video linaro
shutdown -h now    ( prepare to install PPA-jjriek-rockchip )

Plugin USB2 sata ssd to PC.
cp ~/build-orangepi5plus/bookworm-uefi/patches/config-6.1.0-1020-rockchip /media/$USER/*/home/linaro
cd /media/$USER/*/etc/apt/preferences.d
sudo vi extra-ppas.pref ( add
Package: *
Pin: release o=LP-PPA-jjriek-rockchip
Pin-Priority: 1001

Package: *
Pin: release o=LP-PPA-jjriek-rockchip-multimedia
Pin-Priority: 1001
)
cd ~/
sudo vi /media/$USER/*/etc/apt/sources.list ( add
deb http://ppa.launchpad.net/jjriek/panfork-mesa/ubuntu jammy main
deb http://ppa.launchpad.net/mozillateam/ppa/ubuntu jammy main
)
sudo vi /media/$USER/*/etc/environment ( add
MUTTER_DEBUG_ENABLE_ATOMIC_KMS=0
MUTTER_DEBUG_FORCE_KMS_MODE=simple
CLUTTER_PAINT=disable-dynamic-max-render-time
)
sync
sudo umount /media/$USER/*
Eject USB2 sata ssd from PC. Plugin USB2 sata ssd to orangepi-5-plus.

Power on orangepi-5-plus.
sudo apt install openssh-server net-tools
uname -a
lsb_release -a
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys AEBDF4819BE21867 9BDB3D89CE49EC21 8065BE1FC67AABDE F02122ECF25FB4D7
sudo mv /etc/apt/trusted.gpg /etc/apt/trusted.gpg.d
sudo apt update; sudo apt upgrade; sudo apt install pulseaudio-utils;
Check if Debian is running UEFI mode:
ls /sys/firmware/efi
Check display mode: ( wayland or x11 )
echo $XDG_SESSION_TYPE
Check audio driver: ( pulseaudio or pipewire )
pactl info

sudo apt install build-essential speedtest-cli python3-pip python3-setuptools ffmpeg mpv glmark2-es2 pandoc vlc vlc-plugin-video-output pavucontrol rfkill

speedtest-cli --secure

glmark2-es2

aplay -l
sudo rfkill list

mainline kernel 6.1.0-37-arm64 doesn't support opi5+ sound, bluetooth, ethernet.

sudo apt-get update
sudo apt-get install -y mali-g610-firmware libmali-g610-x11
sudo apt-get update 
sudo apt-get upgrade -y
sudo apt-get dist-upgrade -y
sudo apt-get install -y build-essential git wget v4l-utils glmark2-es2 vsftpd

sync
sudo reboot

sudo apt install libncurses-dev libelf-dev flex bison libssl-dev speedtest-cli libjpeg-dev libpng-dev libpng16-16 pkg-config libx11-dev python3-pip python3-setuptools chromium chromium-sandbox ffmpeg mpv pandoc git zip pavucontrol debhelper rsync rfkill lua5.1 bluetooth

speedtest-cli
glmark2-es2

----------------------------------------------------
Compile vendor kernel 6.1.75+
----------------------------------------------------

sudo apt install git cmake device-tree-compiler libfdt-dev build-essential libncurses-dev bison flex libssl-dev libelf-dev fakeroot

git clone --depth=1 -b Ubuntu-rockchip-6.1.0-1020.20 https://github.com/Joshua-Riek/linux-rockchip.git
cp ./config-6.1.0-1020-rockchip ./linux-rockchip/arch/arm64/configs/defconfig
cd linux-rockchip
sudo make mrproper
make ARCH=arm64 defconfig
make ARCH=arm64 -j$(nproc)   ( It may take 2 hours )
sudo make ARCH=arm64 modules_install
sudo make ARCH=arm64 dtbs_install
sudo make ARCH=arm64 install

cd ../
ls -la /boot
sudo e2label /dev/sda2 rootfs
sudo blkid /dev/sda2   ( look for LABEL and UUID )

sudo vi /etc/grub.d/40_custom_uuid ( add
#!/bin/sh
exec tail -n +3 $0

menuentry "Boot from UUID" {
    search --no-floppy --fs-uuid --set=root 2ae29122-30c1-4153-b9e8-9235324e52f7
    echo    'Loading Linux 6.1.75+ ...'
    linux /boot/vmlinuz-6.1.75+ root=UUID=2ae29122-30c1-4153-b9e8-9235324e52f7 rootwait rw
    echo    'Loading initial ramdisk ...'
    initrd /boot/initrd.img-6.1.75+
    echo    'Loading rk3588-orangepi-5-plus.dtb'
    devicetree /boot/dtbs/6.1.75+/rockchip/rk3588-orangepi-5-plus.dtb
}
)

Note: change the above UUID to real UUID like: b3adbe54-ab88-4da5-a9a6-08cf87a09d69

sudo chmod +x /etc/grub.d/40_custom_uuid

sudo vi /etc/default/grub ( change GRUB_DEFAULT=0 to GRUB_DEFAULT="Boot from UUID" )
sudo update-grub  ( generate grub.cfg )
cd ~/
sync
sudo shutdown -h now

Unplug wifi dongle. Plugin ethernet cable to orangepi-5-plus. Power on orangepi-5-plus.

uname -a
lsb_release -a

date
Check if Debian is running UEFI mode:
ls /sys/firmware/efi
Check display mode: ( wayland or x11 )
echo $XDG_SESSION_TYPE
Check audio driver: ( pulseaudio or pipewire )
pactl info

sudo apt install curl git zip rfkill speedtest-cli python3-pip python3-setuptools ffmpeg mpv glmark2-es2-wayland pandoc firefox-esr vlc vlc-plugin-video-output

speedtest-cli --secure

glmark2-es2-wayland

aplay -l
pavucontrol  ( select card0 hdmi0 as default )

firefox -> youtube -> search YmDNhi07_Ho

git clone https://github.com/yt-dlp/yt-dlp.git
cd yt-dlp
make
cd ../
~/yt-dlp/yt-dlp -f 'bestvideo[ext=mp4][protocol=https]+bestaudio[ext=m4a][protocol=https]' 3qrKjywjo7Q -o swan.mp4
mpv --hwdec=auto-copy --log-file=mpv.log swan.mp4
grep Using mpv.log
cvlc --gl=wgl --glconv=any swan.mp4

Plugin ASUS USB-BT500 bluetooth usb dongle to rpi5.
sudo rfkill list
hciconfig hci0
hcitool dev
hciconfig -a
