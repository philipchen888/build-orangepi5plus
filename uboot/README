Build uboot image for orangepi 5 plus.

Prepare spi nor flash for uefi boot:

cd ~/build-orangepi5plus/uboot
sudo apt install git gcc g++ build-essential gcc-aarch64-linux-gnu iasl python3-pyelftools uuid-dev 
git clone https://github.com/edk2-porting/edk2-rk3588.git --recursive
cd edk2-rk3588
./build.sh --device orangepi-5plus --release Release

The result is in ~/build-orangepi5plus/uboot/edk2-rk3588/RK3588_NOR_FLASH.img

Burn sdcard with Orangepi5plus_1.0.8_debian_bookworm_desktop_xfce_linux6.1.43.img
Eject sdcard from PC. Plugin sdcard to PC again.
cp ~/build-orangepi5plus/uboot/edk2-rk3588/RK3588_NOR_FLASH.img /media/$USER/*/home/orangepi
sync
Eject sdcard from PC.
Boot orangepi5plus with sdcard.

Erase spi nor flash:
sudo dd if=/dev/zero of=/dev/mtdblock0 bs=1M count=16 status=progress conv=notrunc,fsync

Install uefi firmware to spi nor flash:
sudo dd if=./RK3588_NOR_FLASH.img of=/dev/mtdblock0 bs=1M status=progress conv=notrunc,fsync
sudo shutdown -h now

----------------------------------------------------------------

Prepare spi nor flash for extlinux boot:

Boot NVMe without sdcard, need to flash u-boot image to spi:
See https://github.com/si0ls/u-boot-orangepi5

Download Orangepi5plus_1.0.8_debian_bookworm_desktop_xfce_linux6.1.43.7z from http://www.orangepi.org/html/hardWare/computerAndMicrocontrollers/service-and-support/Orange-Pi-5-plus-32GB.html
7z x Orangepi5plus_1.0.8_debian_bookworm_desktop_xfce_linux6.1.43.7z
Burn debian bookworm desktop image to sdcard.
After booting debian bookworm desktop,
1. Download binary from website:
wget https://github.com/si0ls/u-boot-orangepi5/releases/download/v1.1/u-boot-v2024.07-orangepi5-plus-spi.bin

2. Erase spi flash:
sudo dd if=/dev/zero of=/dev/mtdblock0 bs=1M count=16 status=progress conv=notrunc,fsync

3. Program spi flash:
sudo dd if=./u-boot-v2024.07-orangepi5-plus-spi.bin of=/dev/mtdblock0 bs=1M status=progress conv=notrunc,fsync

After step 1,2,3 done, Boot NVMe without sdcard.

--------------------------------------------------

Compile uboot from source:

wget https://source.denx.de/u-boot/u-boot/-/archive/v2024.07/u-boot-v2024.07.tar.gz
tar -xzf u-boot-v2024.07.tar.gz
mv u-boot-v2024.07 u-boot
wget https://github.com/rockchip-linux/rkbin/archive/refs/heads/master.tar.gz
tar -xzf master.tar.gz
mv rkbin-master rkbin
make u-boot
The result is in ./out/u-boot-v2024.07-orangepi5-plus-spi.bin

-----------------------------------------------------
